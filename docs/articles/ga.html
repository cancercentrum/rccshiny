<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Använda Google Analytics med rccShiny • rccShiny</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Använda Google Analytics med rccShiny">
<meta property="og:description" content="rccShiny">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rccShiny</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/anslutningsinfo.html">Anslutningsinformation</a>
    </li>
    <li>
      <a href="../articles/ga.html">Använda Google Analytics med rccShiny</a>
    </li>
    <li>
      <a href="../articles/tolkningsmanual.html">Tolkningsmanual för interaktiva Shinyrapporter</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ga_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Använda Google Analytics med rccShiny</h1>
            
      
      
      <div class="hidden name"><code>ga.Rmd</code></div>

    </div>

    
    
<div id="vad-är-google-analytics" class="section level2">
<h2 class="hasAnchor">
<a href="#vad-%C3%A4r-google-analytics" class="anchor"></a>Vad är Google Analytics?</h2>
<p>Google Analytics är ett gratis verktyg för att visa statistik kring användandet av en webbplats. Verktyget kan användas för att studera en mängd olika parametrar, men det mest grundläggande syftet är att ta reda på hur många besökare ens webbplats har, samt att t.ex. analysera vilka underliggande sidor som användare besöker mest.</p>
</div>
<div id="google-analytics-och-rccshiny" class="section level2">
<h2 class="hasAnchor">
<a href="#google-analytics-och-rccshiny" class="anchor"></a>Google Analytics och rccShiny</h2>
<p>I rccShiny finns redan inbyggd funktionalitet för att koppla den resulterande shiny-applikationen till Google Analytics. Nedan följer instruktioner för hur man går till väga för att få detta på plats för sitt registers interaktiva årsrapport på statistik.incanet.se.</p>
<div id="steg-1-skapa-ett-google-analytics-konto-för-ert-registers-interaktiva-årsrapport" class="section level3">
<h3 class="hasAnchor">
<a href="#steg-1-skapa-ett-google-analytics-konto-f%C3%B6r-ert-registers-interaktiva-%C3%A5rsrapport" class="anchor"></a>Steg 1: Skapa ett Google Analytics-konto för ert registers interaktiva årsrapport</h3>
<p>Att komma igång med Google Analytics går väldigt enkelt genom att följa instruktionerna här:<br><a href="https://support.google.com/analytics/answer/1008015?hl=sv" class="uri">https://support.google.com/analytics/answer/1008015?hl=sv</a></p>
<p>Viktigt att tänka på är att ni endast behöver skapa en så kallad “egendom” för hela er interaktiva årsrapport, dvs. ni behöver inte skapa en egendom för varje shiny-applikation.</p>
</div>
<div id="steg-2-skapa-en--js-fil-innehållande-koppling-till-google-analytics" class="section level3">
<h3 class="hasAnchor">
<a href="#steg-2-skapa-en--js-fil-inneh%C3%A5llande-koppling-till-google-analytics" class="anchor"></a>Steg 2: Skapa en .js-fil innehållande koppling till Google Analytics</h3>
<p>Vi kommer nu behöva spara ner en .js-fil innehållande lite JavaScript-kod som refererar till er egendoms spårnings-id. Instruktioner för att hitta denna kod finns i nedanstående länk samt i exemplet i nedanstående skärmdump:<br><a href="https://support.google.com/analytics/answer/1008080" class="uri">https://support.google.com/analytics/answer/1008080</a></p>
<p><img src="figures/ga-fig-1.png" style="width:100.0%"></p>
<p>Använd nu en texteditor för att skapa en .js-fil med valfritt namn (t.ex. ga.js) och klistra in nedanstående kod där ni också ersätter <strong>UA-XXXXX-Y</strong> med er eget spårnings-id.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a>(<span class="kw">function</span>(i<span class="op">,</span>s<span class="op">,</span>o<span class="op">,</span>g<span class="op">,</span>r<span class="op">,</span>a<span class="op">,</span>m){i[<span class="st">'GoogleAnalyticsObject'</span>]<span class="op">=</span>r<span class="op">;</span>i[r]<span class="op">=</span>i[r]<span class="op">||</span><span class="kw">function</span>(){</span>
<span id="cb1-2"><a href="#cb1-2"></a>(i[r]<span class="op">.</span><span class="at">q</span><span class="op">=</span>i[r]<span class="op">.</span><span class="at">q</span><span class="op">||</span>[])<span class="op">.</span><span class="fu">push</span>(<span class="kw">arguments</span>)}<span class="op">,</span>i[r]<span class="op">.</span><span class="at">l</span><span class="op">=</span><span class="dv">1</span><span class="op">*</span><span class="kw">new</span> <span class="bu">Date</span>()<span class="op">;</span>a<span class="op">=</span>s<span class="op">.</span><span class="fu">createElement</span>(o)<span class="op">,</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>m<span class="op">=</span>s<span class="op">.</span><span class="fu">getElementsByTagName</span>(o)[<span class="dv">0</span>]<span class="op">;</span>a<span class="op">.</span><span class="at">async</span><span class="op">=</span><span class="dv">1</span><span class="op">;</span>a<span class="op">.</span><span class="at">src</span><span class="op">=</span>g<span class="op">;</span>m<span class="op">.</span><span class="at">parentNode</span><span class="op">.</span><span class="fu">insertBefore</span>(a<span class="op">,</span>m)</span>
<span id="cb1-4"><a href="#cb1-4"></a>})(<span class="bu">window</span><span class="op">,</span><span class="bu">document</span><span class="op">,</span><span class="st">'script'</span><span class="op">,</span><span class="st">'https://www.google-analytics.com/analytics.js'</span><span class="op">,</span><span class="st">'ga'</span>)<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a>ga(<span class="st">'create'</span><span class="op">,</span> <span class="st">'UA-XXXXX-Y'</span><span class="op">,</span> <span class="st">'auto'</span>)<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>ga(<span class="st">'send'</span><span class="op">,</span> <span class="st">'pageview'</span>)<span class="op">;</span></span></code></pre></div>
</div>
<div id="steg-3-kopiera--js-filen-till-servern" class="section level3">
<h3 class="hasAnchor">
<a href="#steg-3-kopiera--js-filen-till-servern" class="anchor"></a>Steg 3: Kopiera .js-filen till servern</h3>
<p>Ladda nu upp .js-filen till ert registers katalog på statistik.incanet.se, förslagsvis under underkatalogen “_libs”. I exemplet för NPCR ligger därmed filen under sökvägen:<br><a href="https://statistik.incanet.se/npcr/_libs/ga.js" class="uri">https://statistik.incanet.se/npcr/_libs/ga.js</a></p>
</div>
<div id="steg-4-justera-anropet-till-rccshiny" class="section level3">
<h3 class="hasAnchor">
<a href="#steg-4-justera-anropet-till-rccshiny" class="anchor"></a>Steg 4: Justera anropet till rccShiny</h3>
<p>I anropet till rccShiny kan man ange sökvägen till ens .js-fil i en parameter med namnet <strong>gaPath</strong>. I exemplet för NPCR anges därför följande parameter vid skapandet av varje rccShiny-applikation:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/rccShiny2.html">rccShiny2</a></span>(
  <span class="no">...</span>,
  <span class="kw">gaPath</span> <span class="kw">=</span> <span class="st">"/npcr/_libs/ga.js"</span>
)</pre></body></html></div>
<p>Ersätt således sökvägen ovan med korrekt sökväg till .js-filen för er interaktiva årsrapport. Ni behöver inte ange <a href="https://statistik.incanet.se" class="uri">https://statistik.incanet.se</a> i början av sökvägen. När sökvägen börjar med / antas sökvägen referera till den server som sidan ligger på.</p>
</div>
<div id="steg-5-lägg-till-referens-till-google-analytics-i-index-html" class="section level3">
<h3 class="hasAnchor">
<a href="#steg-5-l%C3%A4gg-till-referens-till-google-analytics-i-index-html" class="anchor"></a>Steg 5: Lägg till referens till Google Analytics i index.html</h3>
<p>Utöver att spåra besökare på varje rccShiny-applikation vill ni säkert också vilja kunna spåra hur många besökare ni har på själva menysidan (index.html). Detta görs genom att lägga till följande kodsnutt i &lt;head&gt;-sektionen i index.html (nedanstående exempel förutsätter att .js-filen heter ga.js och ligger i en katalog “_libs” som är en underkatalog till katalogen där index.html ligger):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">'_libs/ga.js'</span><span class="kw">&gt;&lt;/script&gt;</span></span></code></pre></div>
<p>I exemplet för NPCR kan det således se ut som såhär:</p>
<p><img src="figures/ga-fig-2.png" style="width:100.0%"></p>
</div>
<div id="steg-6-verifiera" class="section level3">
<h3 class="hasAnchor">
<a href="#steg-6-verifiera" class="anchor"></a>Steg 6: Verifiera</h3>
<p>Verifiera gärna att allt funkar genom att besöka menysidan samt några rapporter och kontrollera att besöken loggas i Google Analytics. Vid frågor, hör i första hand av er till er regionala rccShiny-stödperson.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Fredrik Sandin, RCC.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
